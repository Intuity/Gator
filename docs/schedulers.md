A scheduler's role is to allocate compute infrastructure suitable to running a
[tier or wrapper](./how_it_works.md) layer as requested by the parent wrapper's
orchestrator. This may require:

 * Selecting a suitable machine based on the CPU and RAM requests made in a
   [!Job's](specs/job.md) specification;
 * Reserving [licenses](specs/license.md) for commercial tools that are needed
   to execute a [!Job](specs/job.md);
 * Interfacing with a grid engine such as
   [SGE](https://docs.oracle.com/cd/E19279-01/820-3257-12/n1ge.html) or
   [Slurm](https://slurm.schedmd.com).

## Built-in Schedulers

### LocalScheduler

`LocalScheduler` is a simple implementation of the abstract scheduler class
that launches all tiers and wrappers on the local machine. This scheduler will
not scale to large workloads, but is a good starting point for testing out work
specifications.

This is the default scheduler used by Gator, and can be explicitly selected on
the command line by using:

```bash
$> gator --scheduler local
```

## Helper Methods

The `BaseScheduler` class offers some attributes and functions that can be useful
to support all schedulers:

 * `inst.scheduler_id` - determines the name of the scheduler, which can be
   passed to lower-level jobs to re-use the same scheduler. The default behaviour
   is to convert the class name to lowercase and remove the word `scheduler`;
 * `inst.base_command` - constructs a standard set of arguments which are needed
   when launching any job including the parent websocket URL (`--parent`), the
   polling interval for heartbeats and statistic collection (`--interval`), the
   scheduler ID (`--scheduler`), and whether or not all messages should be
   forwarded up the tree (`--all-msg`);
 * `inst.create_command(child)` - accepts an instance of the `Child` dataclass
   and creates a command string specific to launching that job, using the list
   of standard arguments generated by `inst.base_command` and extending them
   with the child ID and tracking directory specific to the wrapper/tier being
   launched.

## Custom Schedulers

Schedulers must extend from the `gator.scheduler.common.BaseScheduler` base class
and implement at least the `launch` and `wait_for_all` as described below:

---

::: gator.scheduler.common.BaseScheduler.launch
    options:
      show_root_heading: true
      heading_level: 3
      show_source: false

---

::: gator.scheduler.common.BaseScheduler.wait_for_all
    options:
      show_root_heading: true
      heading_level: 3
      show_source: false

---
